<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>⚡ Power Switch V3 - GitHub Dashboard</title>
    
    <!-- Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@3.3.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.2.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@2.1.0"></script>
    
    <style>
        :root {
            --primary: #4361ee;
            --primary-dark: #3a0ca3;
            --primary-light: #4cc9f0;
            --secondary: #7209b7;
            --success: #2ecc71;
            --danger: #e74c3c;
            --warning: #f39c12;
            --info: #3498db;
            --dark: #1a1a2e;
            --darker: #16213e;
            --light: #f8f9fa;
            --gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --glass: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--darker), #0f3460);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* Background Animation */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            overflow: hidden;
        }
        
        .bg-particle {
            position: absolute;
            background: radial-gradient(circle, var(--primary-light) 1%, transparent 1%);
            background-size: 50px 50px;
            width: 100%;
            height: 100%;
            opacity: 0.1;
            animation: particleMove 20s linear infinite;
        }
        
        @keyframes particleMove {
            0% { transform: translateY(0) translateX(0); }
            100% { transform: translateY(-100px) translateX(100px); }
        }
        
        .bg-grid {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(var(--glass-border) 1px, transparent 1px),
                linear-gradient(90deg, var(--glass-border) 1px, transparent 1px);
            background-size: 50px 50px;
            opacity: 0.05;
        }
        
        /* Glass Morphism */
        .glass {
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            box-shadow: var(--shadow);
            border-radius: 20px;
        }
        
        .glass-dark {
            background: rgba(26, 26, 46, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(67, 97, 238, 0.3);
        }
        
        /* Header */
        .header {
            padding: 30px 40px;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(67, 97, 238, 0.1),
                transparent);
            animation: shine 3s infinite;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .logo-icon {
            font-size: 4rem;
            color: var(--primary-light);
            filter: drop-shadow(0 0 20px rgba(76, 201, 240, 0.5));
            animation: pulseGlow 2s infinite alternate;
        }
        
        @keyframes pulseGlow {
            0% { 
                transform: scale(1);
                filter: drop-shadow(0 0 20px rgba(76, 201, 240, 0.5));
            }
            100% { 
                transform: scale(1.1);
                filter: drop-shadow(0 0 30px rgba(76, 201, 240, 0.8));
            }
        }
        
        .logo-text {
            font-size: 3.5rem;
            font-weight: 900;
            background: linear-gradient(45deg, var(--primary-light), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .logo-subtitle {
            font-size: 1.2rem;
            opacity: 0.8;
            margin-left: 10px;
        }
        
        /* Status Bar */
        .status-bar {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        
        .status-badge {
            padding: 12px 24px;
            border-radius: 50px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .status-badge::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.2), 
                transparent);
            transition: 0.5s;
        }
        
        .status-badge:hover::before {
            left: 100%;
        }
        
        .status-online {
            background: linear-gradient(135deg, var(--success), #27ae60);
            box-shadow: 0 4px 20px rgba(46, 204, 113, 0.3);
        }
        
        .status-offline {
            background: linear-gradient(135deg, var(--danger), #c0392b);
            box-shadow: 0 4px 20px rgba(231, 76, 60, 0.3);
        }
        
        .status-warning {
            background: linear-gradient(135deg, var(--warning), #e67e22);
            box-shadow: 0 4px 20px rgba(243, 156, 18, 0.3);
        }
        
        .status-pulse {
            animation: statusPulse 2s infinite;
        }
        
        @keyframes statusPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        /* Main Container */
        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        /* Cards */
        .card {
            padding: 30px;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }
        
        .card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
        
        .card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--primary-light));
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.4s ease;
        }
        
        .card:hover::after {
            transform: scaleX(1);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--glass-border);
        }
        
        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .card-icon {
            font-size: 1.8rem;
            color: var(--primary-light);
        }
        
        /* Value Displays */
        .value-display {
            text-align: center;
            margin: 20px 0;
            position: relative;
        }
        
        .main-value {
            font-size: 4rem;
            font-weight: 800;
            background: linear-gradient(45deg, var(--light), var(--primary-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 20px rgba(76, 201, 240, 0.3);
            line-height: 1;
        }
        
        .value-unit {
            font-size: 1.2rem;
            opacity: 0.8;
            margin-left: 5px;
        }
        
        .value-label {
            font-size: 1rem;
            opacity: 0.7;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 10px;
        }
        
        .value-change {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-top: 10px;
        }
        
        .change-up {
            background: rgba(46, 204, 113, 0.2);
            color: var(--success);
        }
        
        .change-down {
            background: rgba(231, 76, 60, 0.2);
            color: var(--danger);
        }
        
        /* Mini Cards Grid */
        .mini-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        .mini-card {
            padding: 20px;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.05);
            transition: all 0.3s;
        }
        
        .mini-card:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-5px);
        }
        
        .mini-value {
            font-size: 1.8rem;
            font-weight: 700;
            margin: 5px 0;
        }
        
        /* Chart Containers */
        .chart-container {
            height: 400px;
            position: relative;
            margin: 20px 0;
        }
        
        .chart-container-lg {
            height: 500px;
        }
        
        /* Control Panel */
        .control-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }
        
        .control-btn {
            padding: 20px;
            border: none;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
        }
        
        .control-btn i {
            font-size: 2rem;
        }
        
        .control-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 10px 25px rgba(67, 97, 238, 0.4);
        }
        
        .control-btn:active {
            transform: translateY(-2px) scale(1.02);
        }
        
        .btn-success {
            background: linear-gradient(135deg, var(--success), #27ae60);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #c0392b);
        }
        
        .btn-warning {
            background: linear-gradient(135deg, var(--warning), #e67e22);
        }
        
        /* Tabs */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            overflow-x: auto;
            padding-bottom: 10px;
        }
        
        .tab {
            padding: 15px 30px;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.05);
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .tab:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-3px);
        }
        
        .tab.active {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.3);
        }
        
        .tab-badge {
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.8rem;
            background: rgba(255, 255, 255, 0.2);
        }
        
        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: fadeIn 0.3s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .modal-content {
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.4s;
        }
        
        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        /* Table */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .data-table th {
            text-align: left;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.9rem;
        }
        
        .data-table td {
            padding: 15px;
            border-bottom: 1px solid var(--glass-border);
        }
        
        .data-table tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }
        
        /* Progress Bars */
        .progress-bar {
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
            margin: 15px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-light), var(--primary));
            border-radius: 5px;
            transition: width 1s ease;
            position: relative;
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.3), 
                transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        /* Notification System */
        .notification-center {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            max-width: 400px;
        }
        
        .notification {
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            animation: slideInRight 0.3s, fadeOut 0.3s 4.7s;
            position: relative;
            overflow: hidden;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes fadeOut {
            to { opacity: 0; transform: translateX(100%); }
        }
        
        .notification::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
        }
        
        .notification::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            height: 4px;
            background: currentColor;
            animation: notificationTimer 5s linear;
        }
        
        @keyframes notificationTimer {
            from { width: 100%; }
            to { width: 0%; }
        }
        
        .notification-success {
            background: rgba(46, 204, 113, 0.9);
            border-left: 4px solid var(--success);
        }
        
        .notification-error {
            background: rgba(231, 76, 60, 0.9);
            border-left: 4px solid var(--danger);
        }
        
        .notification-warning {
            background: rgba(243, 156, 18, 0.9);
            border-left: 4px solid var(--warning);
        }
        
        .notification-info {
            background: rgba(52, 152, 219, 0.9);
            border-left: 4px solid var(--info);
        }
        
        /* Gauge */
        .gauge-container {
            width: 200px;
            height: 200px;
            position: relative;
            margin: 0 auto;
        }
        
        /* Floating Action Button */
        .fab {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(67, 97, 238, 0.4);
            z-index: 100;
            transition: all 0.3s;
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .fab:hover {
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 10px 30px rgba(67, 97, 238, 0.6);
        }
        
        /* Loader */
        .loader {
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top-color: var(--primary-light);
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Responsive Design */
        @media (max-width: 1200px) {
            .dashboard-grid {
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            }
            
            .main-value {
                font-size: 3rem;
            }
        }
        
        @media (max-width: 768px) {
            .header {
                padding: 20px;
            }
            
            .logo-text {
                font-size: 2.5rem;
            }
            
            .logo-icon {
                font-size: 3rem;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .card {
                padding: 20px;
            }
            
            .main-value {
                font-size: 2.5rem;
            }
            
            .control-panel {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 480px) {
            .control-panel {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab {
                justify-content: center;
            }
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border-radius: 5px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--primary-light), var(--primary));
        }
        
        /* Typing Effect */
        .typing-effect {
            overflow: hidden;
            border-right: 3px solid var(--primary-light);
            white-space: nowrap;
            animation: typing 3.5s steps(40, end), blink-caret 0.75s step-end infinite;
        }
        
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        
        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: var(--primary-light) }
        }
        
        /* Hover Effects */
        .hover-3d {
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .hover-3d:hover {
            transform: perspective(1000px) rotateX(5deg) rotateY(5deg) translateZ(20px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        }
        
        /* Glitch Text Effect */
        .glitch {
            position: relative;
            animation: glitch 5s infinite;
        }
        
        @keyframes glitch {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }
        
        /* Particle Button Effect */
        .particle-btn {
            position: relative;
            overflow: hidden;
        }
        
        .particle-btn span {
            position: absolute;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.7);
            width: 100px;
            height: 100px;
            margin-top: -50px;
            margin-left: -50px;
            animation: particle 1s;
            opacity: 0;
        }
        
        @keyframes particle {
            0% { 
                transform: scale(0.1); 
                opacity: 1; 
            }
            100% { 
                transform: scale(2); 
                opacity: 0; 
            }
        }
        
        /* Neon Glow */
        .neon-text {
            color: #fff;
            text-shadow: 
                0 0 5px #fff,
                0 0 10px #fff,
                0 0 20px var(--primary-light),
                0 0 40px var(--primary-light),
                0 0 80px var(--primary-light);
            animation: neon 1.5s ease-in-out infinite alternate;
        }
        
        @keyframes neon {
            from {
                text-shadow: 
                    0 0 5px #fff,
                    0 0 10px #fff,
                    0 0 20px var(--primary-light),
                    0 0 40px var(--primary-light),
                    0 0 80px var(--primary-light);
            }
            to {
                text-shadow: 
                    0 0 2px #fff,
                    0 0 5px #fff,
                    0 0 10px var(--primary-light),
                    0 0 20px var(--primary-light),
                    0 0 40px var(--primary-light);
            }
        }
        
        /* Data Visualization */
        .sparkline {
            height: 40px;
            width: 100%;
            position: relative;
        }
        
        .sparkline-line {
            fill: none;
            stroke: var(--primary-light);
            stroke-width: 2;
        }
        
        .sparkline-area {
            fill: rgba(76, 201, 240, 0.1);
        }
        
        /* Weather Widget Style */
        .weather-widget {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            padding: 20px;
            border-radius: 15px;
            background: linear-gradient(135deg, #2980b9, #2c3e50);
            position: relative;
            overflow: hidden;
        }
        
        .weather-widget::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, 
                transparent, 
                rgba(255, 255, 255, 0.1), 
                transparent);
            transform: rotate(45deg);
            animation: weatherShine 3s linear infinite;
        }
        
        @keyframes weatherShine {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }
        
        /* Timeline */
        .timeline {
            position: relative;
            padding-left: 30px;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, 
                var(--primary), 
                var(--primary-light));
        }
        
        .timeline-item {
            position: relative;
            margin-bottom: 30px;
            padding-left: 20px;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -8px;
            top: 5px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--primary);
            border: 3px solid var(--primary-light);
        }
        
        /* Calendar Widget */
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            padding: 20px;
        }
        
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .calendar-day:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.1);
        }
        
        .calendar-day.today {
            background: var(--primary);
            color: white;
            box-shadow: 0 0 20px rgba(67, 97, 238, 0.5);
        }
        
        /* Energy Flow Animation */
        .energy-flow {
            position: relative;
            height: 100px;
            overflow: hidden;
        }
        
        .energy-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--primary-light);
            border-radius: 50%;
            animation: energyFlow 2s linear infinite;
        }
        
        @keyframes energyFlow {
            0% { 
                transform: translateY(100px) translateX(-20px);
                opacity: 0;
            }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { 
                transform: translateY(-20px) translateX(100px);
                opacity: 0;
            }
        }
        
        /* Avatar */
        .avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            position: relative;
        }
        
        .avatar::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 50%;
            background: linear-gradient(45deg, 
                var(--primary-light), 
                var(--primary), 
                var(--primary-dark));
            z-index: -1;
            animation: rotate 3s linear infinite;
        }
        
        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Background Animation -->
    <div class="bg-animation">
        <div class="bg-particle"></div>
        <div class="bg-grid"></div>
    </div>
    
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo-container">
                <i class="fas fa-bolt logo-icon"></i>
                <div>
                    <h1 class="logo-text">POWER SWITCH V3</h1>
                    <div class="logo-subtitle typing-effect">Advanced Power Management Dashboard</div>
                </div>
            </div>
            
            <div class="status-bar">
                <div class="status-badge status-online status-pulse">
                    <i class="fas fa-circle"></i>
                    <span id="connection-status">CONNECTING...</span>
                </div>
                <div class="status-badge" id="system-mode">
                    <i class="fas fa-cogs"></i>
                    <span>Mode: AUTO</span>
                </div>
                <div class="status-badge" id="current-source">
                    <i class="fas fa-plug"></i>
                    <span>Source: None</span>
                </div>
                <div class="status-badge" id="uptime-display">
                    <i class="fas fa-clock"></i>
                    <span>Uptime: 0s</span>
                </div>
                <div class="status-badge" id="last-update">
                    <i class="fas fa-sync"></i>
                    <span>Last: --:--:--</span>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Main Content -->
    <main class="container">
        <!-- Tabs Navigation -->
        <div class="tabs">
            <div class="tab active" onclick="showTab('dashboard')">
                <i class="fas fa-tachometer-alt"></i>
                Dashboard
                <span class="tab-badge">Live</span>
            </div>
            <div class="tab" onclick="showTab('monitoring')">
                <i class="fas fa-chart-line"></i>
                Monitoring
                <span class="tab-badge" id="data-count">0</span>
            </div>
            <div class="tab" onclick="showTab('control')">
                <i class="fas fa-gamepad"></i>
                Control Panel
                <span class="tab-badge">Active</span>
            </div>
            <div class="tab" onclick="showTab('analytics')">
                <i class="fas fa-chart-bar"></i>
                Analytics
                <span class="tab-badge">AI</span>
            </div>
            <div class="tab" onclick="showTab('energy')">
                <i class="fas fa-battery-full"></i>
                Energy
                <span class="tab-badge">Smart</span>
            </div>
            <div class="tab" onclick="showTab('logs')">
                <i class="fas fa-clipboard-list"></i>
                System Logs
                <span class="tab-badge" id="log-count">0</span>
            </div>
            <div class="tab" onclick="showTab('settings')">
                <i class="fas fa-cog"></i>
                Settings
            </div>
        </div>
        
        <!-- Dashboard Tab -->
        <div id="dashboard-tab" class="tab-content">
            <div class="dashboard-grid">
                <!-- Voltage Card -->
                <div class="card glass hover-3d">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-bolt card-icon"></i>
                            Voltage Monitoring
                        </div>
                        <div class="quality-indicator" id="voltage-quality">
                            <i class="fas fa-spinner fa-spin"></i> Checking...
                        </div>
                    </div>
                    <div class="value-display">
                        <div class="main-value" id="voltage1-display">0.0<span class="value-unit">V</span></div>
                        <div class="value-label">Source 1</div>
                        <div class="value-change change-up" id="v1-change">+0.0%</div>
                    </div>
                    <div class="value-display">
                        <div class="main-value" id="voltage2-display">0.0<span class="value-unit">V</span></div>
                        <div class="value-label">Source 2</div>
                        <div class="value-change" id="v2-change">+0.0%</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="voltage-progress" style="width: 50%"></div>
                    </div>
                </div>
                
                <!-- Power Card -->
                <div class="card glass hover-3d">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-charging-station card-icon"></i>
                            Power Analytics
                        </div>
                        <div class="avatar">⚡</div>
                    </div>
                    <div class="value-display">
                        <div class="main-value" id="power-display">0.0<span class="value-unit">W</span></div>
                        <div class="value-label">Current Power</div>
                        <div class="value-change" id="power-change">+0.0%</div>
                    </div>
                    <div class="mini-grid">
                        <div class="mini-card">
                            <div class="value-label">Current</div>
                            <div class="mini-value" id="current-display">0.000A</div>
                        </div>
                        <div class="mini-card">
                            <div class="value-label">Frequency</div>
                            <div class="mini-value" id="frequency-display">50.0Hz</div>
                        </div>
                        <div class="mini-card">
                            <div class="value-label">Power Factor</div>
                            <div class="mini-value" id="pf-display">0.95</div>
                        </div>
                        <div class="mini-card">
                            <div class="value-label">Temperature</div>
                            <div class="mini-value" id="temp-display">25°C</div>
                        </div>
                    </div>
                </div>
                
                <!-- Energy Card -->
                <div class="card glass hover-3d">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-leaf card-icon"></i>
                            Energy Consumption
                        </div>
                        <div class="gauge-container">
                            <canvas id="energy-gauge"></canvas>
                        </div>
                    </div>
                    <div class="value-display">
                        <div class="main-value" id="energy-display">0.000<span class="value-unit">kWh</span></div>
                        <div class="value-label">Total Energy</div>
                        <div class="value-change change-up" id="energy-change">+0.0%</div>
                    </div>
                    <div class="energy-flow" id="energy-flow"></div>
                    <div class="mini-grid">
                        <div class="mini-card">
                            <div class="value-label">Today</div>
                            <div class="mini-value" id="daily-energy">0.0kWh</div>
                        </div>
                        <div class="mini-card">
                            <div class="value-label">This Month</div>
                            <div class="mini-value" id="monthly-energy">0.0kWh</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Charts Section -->
            <div class="dashboard-grid">
                <div class="card glass">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-wave-square card-icon"></i>
                            Real-time Voltage Chart
                        </div>
                        <div class="control-btn" onclick="toggleChart('voltage')">
                            <i class="fas fa-expand"></i>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="realTimeChart"></canvas>
                    </div>
                </div>
                
                <div class="card glass">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-fire card-icon"></i>
                            Power Usage Analytics
                        </div>
                        <div class="control-btn" onclick="toggleChart('power')">
                            <i class="fas fa-expand"></i>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="powerChart"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- Quick Stats -->
            <div class="dashboard-grid">
                <div class="card glass">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-history card-icon"></i>
                            System Statistics
                        </div>
                    </div>
                    <div class="mini-grid">
                        <div class="mini-card">
                            <div class="value-label">Total Switches</div>
                            <div class="mini-value neon-text" id="total-switches">0</div>
                        </div>
                        <div class="mini-card">
                            <div class="value-label">Fault Count</div>
                            <div class="mini-value" id="fault-count">0</div>
                        </div>
                        <div class="mini-card">
                            <div class="value-label">Uptime</div>
                            <div class="mini-value" id="uptime-detail">0d 0h</div>
                        </div>
                        <div class="mini-card">
                            <div class="value-label">Reliability</div>
                            <div class="mini-value" id="reliability-score">99.9%</div>
                        </div>
                    </div>
                </div>
                
                <div class="card glass">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-network-wired card-icon"></i>
                            Network Status
                        </div>
                    </div>
                    <div class="mini-grid">
                        <div class="mini-card">
                            <div class="value-label">WiFi Signal</div>
                            <div class="mini-value" id="wifi-rssi">-dBm</div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="wifi-strength" style="width: 75%"></div>
                            </div>
                        </div>
                        <div class="mini-card">
                            <div class="value-label">IP Address</div>
                            <div class="mini-value" id="ip-address">0.0.0.0</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Monitoring Tab -->
        <div id="monitoring-tab" class="tab-content" style="display: none;">
            <div class="dashboard-grid">
                <div class="card glass chart-container-lg">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-chart-area card-icon"></i>
                            Advanced Monitoring
                        </div>
                        <div class="control-btn" onclick="exportData()">
                            <i class="fas fa-download"></i> Export
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="advancedChart"></canvas>
                    </div>
                </div>
                
                <div class="card glass">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-exclamation-triangle card-icon"></i>
                            Alert History
                        </div>
                    </div>
                    <div class="chart-container" style="height: 300px;">
                        <canvas id="alertChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Control Panel Tab -->
        <div id="control-tab" class="tab-content" style="display: none;">
            <div class="dashboard-grid">
                <div class="card glass">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-sliders-h card-icon"></i>
                            Manual Control
                        </div>
                    </div>
                    <div class="control-panel">
                        <button class="control-btn btn-success particle-btn" onclick="controlSource(1)">
                            <i class="fas fa-power-off"></i>
                            Source 1 ON
                            <span>Switch to primary source</span>
                        </button>
                        <button class="control-btn btn-success particle-btn" onclick="controlSource(2)">
                            <i class="fas fa-power-off"></i>
                            Source 2 ON
                            <span>Switch to backup source</span>
                        </button>
                        <button class="control-btn btn-danger particle-btn" onclick="controlSource(0)">
                            <i class="fas fa-stop-circle"></i>
                            Emergency OFF
                            <span>Immediate shutdown</span>
                        </button>
                        <button class="control-btn btn-warning particle-btn" onclick="toggleAutoMode()">
                            <i class="fas fa-robot"></i>
                            Toggle Auto Mode
                            <span>Switch auto/manual</span>
                        </button>
                        <button class="control-btn particle-btn" onclick="optimizeSystem()">
                            <i class="fas fa-magic"></i>
                            Optimize System
                            <span>Auto-calibration</span>
                        </button>
                        <button class="control-btn particle-btn" onclick="restartSystem()">
                            <i class="fas fa-redo"></i>
                            Restart System
                            <span>Soft reboot</span>
                        </button>
                    </div>
                </div>
                
                <div class="card glass">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-cogs card-icon"></i>
                            System Configuration
                        </div>
                    </div>
                    <div class="mini-grid">
                        <div class="mini-card">
                            <div class="value-label">Switch Threshold</div>
                            <input type="range" min="170" max="250" value="180" class="slider" id="threshold-slider">
                            <div class="mini-value" id="threshold-value">180V</div>
                        </div>
                        <div class="mini-card">
                            <div class="value-label">Current Limit</div>
                            <input type="range" min="5" max="30" value="20" class="slider" id="current-slider">
                            <div class="mini-value" id="current-limit">20A</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Analytics Tab -->
        <div id="analytics-tab" class="tab-content" style="display: none;">
            <div class="card glass chart-container-lg">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-brain card-icon"></i>
                        AI-Powered Analytics
                    </div>
                    <div class="control-btn" onclick="runPrediction()">
                        <i class="fas fa-bolt"></i> Predict
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="analyticsChart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Energy Tab -->
        <div id="energy-tab" class="tab-content" style="display: none;">
            <div class="dashboard-grid">
                <div class="card glass">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-solar-panel card-icon"></i>
                            Energy Forecast
                        </div>
                    </div>
                    <div class="chart-container" style="height: 300px;">
                        <canvas id="forecastChart"></canvas>
                    </div>
                </div>
                
                <div class="card glass">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-coins card-icon"></i>
                            Cost Analysis
                        </div>
                    </div>
                    <div class="value-display">
                        <div class="main-value" id="cost-today">Rp 0</div>
                        <div class="value-label">Today's Cost</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Logs Tab -->
        <div id="logs-tab" class="tab-content" style="display: none;">
            <div class="card glass">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-terminal card-icon"></i>
                        System Logs
                    </div>
                    <div class="control-btn" onclick="clearLogs()">
                        <i class="fas fa-trash"></i> Clear
                    </div>
                </div>
                <div class="chart-container" style="height: 400px; overflow-y: auto;">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Level</th>
                                <th>Source</th>
                                <th>Message</th>
                            </tr>
                        </thead>
                        <tbody id="log-table">
                            <tr><td colspan="4" class="text-center">Loading logs...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- Settings Tab -->
        <div id="settings-tab" class="tab-content" style="display: none;">
            <div class="dashboard-grid">
                <div class="card glass">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-wifi card-icon"></i>
                            Network Settings
                        </div>
                    </div>
                    <div class="mini-grid">
                        <div class="mini-card">
                            <div class="value-label">SSID</div>
                            <input type="text" class="settings-input" value="PowerSwitch-V3" id="wifi-ssid">
                        </div>
                        <div class="mini-card">
                            <div class="value-label">Password</div>
                            <input type="password" class="settings-input" value="********" id="wifi-password">
                        </div>
                    </div>
                    <button class="control-btn" onclick="saveSettings()">
                        <i class="fas fa-save"></i> Save Settings
                    </button>
                </div>
                
                <div class="card glass">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-bell card-icon"></i>
                            Notifications
                        </div>
                    </div>
                    <div class="mini-grid">
                        <div class="mini-card">
                            <div class="value-label">Telegram</div>
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider round"></span>
                            </label>
                        </div>
                        <div class="mini-card">
                            <div class="value-label">Email</div>
                            <label class="switch">
                                <input type="checkbox">
                                <span class="slider round"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Notification Center -->
    <div class="notification-center" id="notification-center"></div>
    
    <!-- Floating Action Button -->
    <div class="fab" onclick="showQuickActions()">
        <i class="fas fa-plus"></i>
    </div>
    
    <!-- Quick Actions Modal -->
    <div class="modal" id="quick-actions-modal">
        <div class="modal-content card glass">
            <div class="card-header">
                <div class="card-title">
                    <i class="fas fa-bolt card-icon"></i>
                    Quick Actions
                </div>
                <div class="control-btn" onclick="hideModal('quick-actions-modal')">
                    <i class="fas fa-times"></i>
                </div>
            </div>
            <div class="control-panel">
                <button class="control-btn" onclick="takeScreenshot()">
                    <i class="fas fa-camera"></i> Screenshot
                </button>
                <button class="control-btn" onclick="exportReport()">
                    <i class="fas fa-file-export"></i> Export Report
                </button>
                <button class="control-btn" onclick="showHelp()">
                    <i class="fas fa-question-circle"></i> Help
                </button>
            </div>
        </div>
    </div>
    
    <!-- Script -->
    <script>
        // Global Variables
        let charts = {};
        let dataBuffer = [];
        let lastUpdate = Date.now();
        let connectionStatus = 'disconnected';
        let autoRefresh = true;
        let theme = 'dark';
        
        // Initialize Dashboard
        function initDashboard() {
            console.log('🚀 Initializing Power Switch V3 Dashboard...');
            
            // Initialize charts
            initCharts();
            
            // Start data updates
            startDataUpdates();
            
            // Setup event listeners
            setupEventListeners();
            
            // Load initial data
            loadInitialData();
            
            // Show welcome notification
            showNotification('Power Switch V3 Dashboard loaded successfully!', 'success');
            
            // Start background animations
            startBackgroundAnimations();
        }
        
        // Initialize Charts
        function initCharts() {
            // Real-time Voltage Chart
            const realTimeCtx = document.getElementById('realTimeChart').getContext('2d');
            charts.realTime = new Chart(realTimeCtx, {
                type: 'line',
                data: {
                    datasets: [{
                        label: 'Source 1 Voltage',
                        data: [],
                        borderColor: '#4cc9f0',
                        backgroundColor: 'rgba(76, 201, 240, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 0
                    }, {
                        label: 'Source 2 Voltage',
                        data: [],
                        borderColor: '#f72585',
                        backgroundColor: 'rgba(247, 37, 133, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: false,
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: '#f8f9fa',
                                font: {
                                    size: 12
                                }
                            }
                        },
                        zoom: {
                            zoom: {
                                wheel: {
                                    enabled: true
                                },
                                pinch: {
                                    enabled: true
                                },
                                mode: 'xy'
                            },
                            pan: {
                                enabled: true,
                                mode: 'xy'
                            }
                        }
                    },
                    scales: {
                        x: {
                            type: 'realtime',
                            realtime: {
                                duration: 60000,
                                refresh: 1000,
                                delay: 2000
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#f8f9fa'
                            }
                        },
                        y: {
                            beginAtZero: false,
                            suggestedMin: 170,
                            suggestedMax: 250,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#f8f9fa'
                            }
                        }
                    }
                }
            });
            
            // Power Chart
            const powerCtx = document.getElementById('powerChart').getContext('2d');
            charts.power = new Chart(powerCtx, {
                type: 'bar',
                data: {
                    labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00'],
                    datasets: [{
                        label: 'Power Consumption',
                        data: [1200, 800, 1500, 2000, 1800, 2200],
                        backgroundColor: 'rgba(67, 97, 238, 0.7)',
                        borderColor: '#4361ee',
                        borderWidth: 2,
                        borderRadius: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#f8f9fa'
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#f8f9fa'
                            }
                        },
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#f8f9fa'
                            }
                        }
                    }
                }
            });
            
            // Initialize other charts
            initGaugeChart();
            initAdvancedChart();
        }
        
        // Initialize Gauge Chart
        function initGaugeChart() {
            const gaugeCtx = document.getElementById('energy-gauge').getContext('2d');
            charts.gauge = new Chart(gaugeCtx, {
                type: 'doughnut',
                data: {
                    datasets: [{
                        data: [75, 25],
                        backgroundColor: ['#4cc9f0', 'rgba(255, 255, 255, 0.1)'],
                        borderWidth: 0,
                        circumference: 270,
                        rotation: 225
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '80%',
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            enabled: false
                        }
                    }
                },
                plugins: [{
                    id: 'gaugeText',
                    afterDraw: (chart) => {
                        const {ctx, chartArea: {width, height}} = chart;
                        ctx.save();
                        ctx.font = 'bold 30px sans-serif';
                        ctx.fillStyle = '#4cc9f0';
                        ctx.textAlign = 'center';
                        ctx.textBaseline = 'middle';
                        ctx.fillText('75%', width / 2, height / 2);
                        
                        ctx.font = '14px sans-serif';
                        ctx.fillStyle = '#f8f9fa';
                        ctx.fillText('Usage', width / 2, height / 2 + 25);
                        ctx.restore();
                    }
                }]
            });
        }
        
        // Initialize Advanced Chart
        function initAdvancedChart() {
            const advancedCtx = document.getElementById('advancedChart').getContext('2d');
            charts.advanced = new Chart(advancedCtx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [
                        {
                            label: 'Voltage Trend',
                            data: [],
                            borderColor: '#4cc9f0',
                            backgroundColor: 'rgba(76, 201, 240, 0.1)',
                            fill: true,
                            tension: 0.4
                        },
                        {
                            label: 'Power Trend',
                            data: [],
                            borderColor: '#f72585',
                            backgroundColor: 'rgba(247, 37, 133, 0.1)',
                            fill: true,
                            tension: 0.4,
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    },
                    plugins: {
                        annotation: {
                            annotations: {
                                line1: {
                                    type: 'line',
                                    yMin: 180,
                                    yMax: 180,
                                    borderColor: '#f39c12',
                                    borderWidth: 2,
                                    borderDash: [5, 5],
                                    label: {
                                        display: true,
                                        content: 'Switch Threshold',
                                        backgroundColor: '#f39c12'
                                    }
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#f8f9fa'
                            }
                        },
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#f8f9fa'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            grid: {
                                drawOnChartArea: false
                            },
                            ticks: {
                                color: '#f8f9fa'
                            }
                        }
                    }
                }
            });
        }
        
        // Start Data Updates
        function startDataUpdates() {
            // Simulate data updates (replace with real API calls)
            setInterval(updateDashboardData, 1000);
            
            // Check connection status
            setInterval(checkConnectionStatus, 5000);
            
            // Update time displays
            setInterval(updateTimeDisplays, 1000);
            
            // Animate energy flow
            setInterval(animateEnergyFlow, 100);
        }
        
        // Update Dashboard Data
        function updateDashboardData() {
            // Simulate sensor data (replace with API call)
            const mockData = {
                voltage1: 220 + (Math.random() * 10 - 5),
                voltage2: 215 + (Math.random() * 10 - 5),
                current: 5.5 + (Math.random() * 2 - 1),
                power: 1200 + (Math.random() * 200 - 100),
                energy: 25.5 + (Math.random() * 0.1),
                temperature: 35 + (Math.random() * 5 - 2.5),
                systemState: 'SOURCE1_ACTIVE',
                autoMode: true,
                switchCount: 42,
                faultCount: 2,
                wifiRSSI: -65,
                ipAddress: '192.168.1.100'
            };
            
            // Update displays
            updateDisplayValues(mockData);
            
            // Update charts
            updateCharts(mockData);
            
            // Update data buffer
            dataBuffer.push({
                timestamp: Date.now(),
                ...mockData
            });
            
            // Keep buffer size manageable
            if (dataBuffer.length > 1000) {
                dataBuffer = dataBuffer.slice(-500);
            }
            
            // Update counters
            document.getElementById('data-count').textContent = dataBuffer.length;
            document.getElementById('log-count').textContent = Math.floor(dataBuffer.length / 10);
            
            lastUpdate = Date.now();
        }
        
        // Update Display Values
        function updateDisplayValues(data) {
            // Voltage
            document.getElementById('voltage1-display').innerHTML = 
                `<span class="neon-text">${data.voltage1.toFixed(1)}</span><span class="value-unit">V</span>`;
            document.getElementById('voltage2-display').innerHTML = 
                `${data.voltage2.toFixed(1)}<span class="value-unit">V</span>`;
            
            // Power
            document.getElementById('power-display').innerHTML = 
                `${data.power.toFixed(1)}<span class="value-unit">W</span>`;
            document.getElementById('current-display').textContent = 
                `${data.current.toFixed(3)}A`;
            
            // Energy
            document.getElementById('energy-display').innerHTML = 
                `${data.energy.toFixed(3)}<span class="value-unit">kWh</span>`;
            
            // Temperature
            document.getElementById('temp-display').textContent = 
                `${data.temperature.toFixed(1)}°C`;
            
            // System info
            document.getElementById('total-switches').textContent = data.switchCount;
            document.getElementById('fault-count').textContent = data.faultCount;
            document.getElementById('wifi-rssi').textContent = `${data.wifiRSSI} dBm`;
            document.getElementById('ip-address').textContent = data.ipAddress;
            
            // Update progress bars
            const voltagePercent = ((data.voltage1 - 170) / 80) * 100;
            document.getElementById('voltage-progress').style.width = `${Math.min(100, Math.max(0, voltagePercent))}%`;
            
            const wifiPercent = ((data.wifiRSSI + 100) / 70) * 100;
            document.getElementById('wifi-strength').style.width = `${Math.min(100, Math.max(0, wifiPercent))}%`;
            
            // Update quality indicator
            const qualityEl = document.getElementById('voltage-quality');
            if (data.voltage1 >= 210 && data.voltage1 <= 230) {
                qualityEl.innerHTML = '<i class="fas fa-check-circle"></i> Quality: EXCELLENT';
                qualityEl.className = 'quality-indicator';
                qualityEl.style.background = 'rgba(46, 204, 113, 0.2)';
            } else if (data.voltage1 < 180) {
                qualityEl.innerHTML = '<i class="fas fa-exclamation-triangle"></i> Quality: LOW';
                qualityEl.className = 'quality-indicator';
                qualityEl.style.background = 'rgba(231, 76, 60, 0.2)';
            } else {
                qualityEl.innerHTML = '<i class="fas fa-info-circle"></i> Quality: GOOD';
                qualityEl.className = 'quality-indicator';
                qualityEl.style.background = 'rgba(52, 152, 219, 0.2)';
            }
        }
        
        // Update Charts
        function updateCharts(data) {
            const now = Date.now();
            
            // Update real-time chart
            if (charts.realTime) {
                const time = new Date(now);
                
                // Add new data point
                charts.realTime.data.datasets[0].data.push({
                    x: time,
                    y: data.voltage1
                });
                
                charts.realTime.data.datasets[1].data.push({
                    x: time,
                    y: data.voltage2
                });
                
                // Remove old data points
                const maxPoints = 60;
                if (charts.realTime.data.datasets[0].data.length > maxPoints) {
                    charts.realTime.data.datasets[0].data.shift();
                    charts.realTime.data.datasets[1].data.shift();
                }
                
                charts.realTime.update('none');
            }
            
            // Update advanced chart
            if (charts.advanced) {
                charts.advanced.data.labels.push(new Date(now).toLocaleTimeString());
                charts.advanced.data.datasets[0].data.push(data.voltage1);
                charts.advanced.data.datasets[1].data.push(data.power);
                
                if (charts.advanced.data.labels.length > 20) {
                    charts.advanced.data.labels.shift();
                    charts.advanced.data.datasets[0].data.shift();
                    charts.advanced.data.datasets[1].data.shift();
                }
                
                charts.advanced.update('none');
            }
        }
        
        // Check Connection Status
        function checkConnectionStatus() {
            const statusEl = document.getElementById('connection-status');
            const statusBadge = statusEl.parentElement;
            
            if (Date.now() - lastUpdate < 10000) {
                connectionStatus = 'connected';
                statusEl.textContent = 'CONNECTED';
                statusBadge.className = 'status-badge status-online status-pulse';
                statusBadge.querySelector('i').className = 'fas fa-circle';
            } else if (Date.now() - lastUpdate < 30000) {
                connectionStatus = 'warning';
                statusEl.textContent = 'LAGGING';
                statusBadge.className = 'status-badge status-warning';
                statusBadge.querySelector('i').className = 'fas fa-exclamation-circle';
            } else {
                connectionStatus = 'disconnected';
                statusEl.textContent = 'DISCONNECTED';
                statusBadge.className = 'status-badge status-offline';
                statusBadge.querySelector('i').className = 'fas fa-times-circle';
                
                showNotification('Connection lost to power switch system', 'error');
            }
        }
        
        // Update Time Displays
        function updateTimeDisplays() {
            const now = new Date();
            
            // Update last update time
            const secondsAgo = Math.floor((Date.now() - lastUpdate) / 1000);
            document.getElementById('last-update').querySelector('span').textContent = 
                `Last: ${secondsAgo}s ago`;
            
            // Update uptime (simulated)
            const uptimeSeconds = Math.floor((Date.now() - window.startTime) / 1000);
            const days = Math.floor(uptimeSeconds / 86400);
            const hours = Math.floor((uptimeSeconds % 86400) / 3600);
            const minutes = Math.floor((uptimeSeconds % 3600) / 60);
            const seconds = uptimeSeconds % 60;
            
            document.getElementById('uptime-display').querySelector('span').textContent = 
                `Uptime: ${days}d ${hours}h ${minutes}m`;
            
            document.getElementById('uptime-detail').textContent = 
                `${days}d ${hours}h`;
        }
        
        // Animate Energy Flow
        function animateEnergyFlow() {
            const flowContainer = document.getElementById('energy-flow');
            if (!flowContainer) return;
            
            // Create new particle
            if (Math.random() < 0.3) {
                const particle = document.createElement('div');
                particle.className = 'energy-particle';
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.animationDelay = `${Math.random() * 2}s`;
                flowContainer.appendChild(particle);
                
                // Remove particle after animation
                setTimeout(() => {
                    if (particle.parentNode === flowContainer) {
                        flowContainer.removeChild(particle);
                    }
                }, 2000);
            }
        }
        
        // Show Notification
        function showNotification(message, type = 'info') {
            const container = document.getElementById('notification-center');
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            
            let icon = 'info-circle';
            switch(type) {
                case 'success': icon = 'check-circle'; break;
                case 'error': icon = 'exclamation-circle'; break;
                case 'warning': icon = 'exclamation-triangle'; break;
            }
            
            notification.innerHTML = `
                <i class="fas fa-${icon}"></i>
                <span>${message}</span>
            `;
            
            container.appendChild(notification);
            
            // Remove notification after 5 seconds
            setTimeout(() => {
                if (notification.parentNode === container) {
                    container.removeChild(notification);
                }
            }, 5000);
        }
        
        // Control Power Source
        function controlSource(source) {
            const btn = event.currentTarget;
            
            // Add particle effect
            createParticleEffect(btn);
            
            let action, message;
            switch(source) {
                case 0:
                    action = 'Emergency Stop';
                    message = '⚠️ Emergency stop activated!';
                    break;
                case 1:
                    action = 'Switch to Source 1';
                    message = '🔌 Switched to Source 1';
                    break;
                case 2:
                    action = 'Switch to Source 2';
                    message = '🔌 Switched to Source 2';
                    break;
            }
            
            showNotification(message, source === 0 ? 'error' : 'success');
            
            // Simulate API call (replace with real API)
            fetch(`/api/control`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({action: source === 0 ? 'off' : `source${source}`})
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showNotification(`${action} successful`, 'success');
                } else {
                    showNotification(`${action} failed: ${data.message}`, 'error');
                }
            })
            .catch(error => {
                showNotification(`Network error: ${error.message}`, 'error');
            });
        }
        
        // Create Particle Effect
        function createParticleEffect(element) {
            const rect = element.getBoundingClientRect();
            const particleCount = 20;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('span');
                const size = Math.random() * 20 + 5;
                const x = Math.random() * rect.width;
                const y = Math.random() * rect.height;
                
                particle.style.cssText = `
                    position: absolute;
                    width: ${size}px;
                    height: ${size}px;
                    background: rgba(255, 255, 255, 0.7);
                    border-radius: 50%;
                    pointer-events: none;
                    left: ${x}px;
                    top: ${y}px;
                `;
                
                element.appendChild(particle);
                
                // Animate particle
                const angle = Math.random() * Math.PI * 2;
                const speed = Math.random() * 100 + 50;
                const duration = Math.random() * 0.5 + 0.5;
                
                particle.animate([
                    {
                        transform: 'translate(0, 0) scale(1)',
                        opacity: 1
                    },
                    {
                        transform: `translate(${Math.cos(angle) * speed}px, ${Math.sin(angle) * speed}px) scale(0)`,
                        opacity: 0
                    }
                ], {
                    duration: duration * 1000,
                    easing: 'cubic-bezier(0.215, 0.610, 0.355, 1)'
                });
                
                // Remove particle after animation
                setTimeout(() => {
                    if (particle.parentNode === element) {
                        element.removeChild(particle);
                    }
                }, duration * 1000);
            }
        }
        
        // Toggle Auto Mode
        function toggleAutoMode() {
            const modeEl = document.getElementById('system-mode');
            const isAuto = modeEl.textContent.includes('AUTO');
            const newMode = !isAuto;
            
            modeEl.querySelector('span').textContent = 
                `Mode: ${newMode ? 'AUTO' : 'MANUAL'}`;
            modeEl.style.background = newMode ? 
                'linear-gradient(135deg, var(--success), #27ae60)' :
                'linear-gradient(135deg, var(--warning), #e67e22)';
            
            showNotification(`Switched to ${newMode ? 'AUTO' : 'MANUAL'} mode`, 'info');
        }
        
        // Optimize System
        function optimizeSystem() {
            showNotification('Starting system optimization...', 'info');
            
            // Show progress
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                showNotification(`Optimizing... ${progress}%`, 'info');
                
                if (progress >= 100) {
                    clearInterval(interval);
                    showNotification('✅ System optimization complete!', 'success');
                }
            }, 500);
        }
        
        // Restart System
        function restartSystem() {
            if (confirm('Are you sure you want to restart the system?')) {
                showNotification('System restarting...', 'warning');
                
                // Simulate restart delay
                setTimeout(() => {
                    showNotification('✅ System restart complete!', 'success');
                    // Reload dashboard data
                    location.reload();
                }, 3000);
            }
        }
        
        // Show Tab
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.style.display = 'none';
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(`${tabName}-tab`).style.display = 'block';
            
            // Add active class to clicked tab
            event.currentTarget.classList.add('active');
            
            // Update charts for tab
            if (tabName === 'monitoring') {
                charts.advanced.resize();
            }
        }
        
        // Toggle Chart Fullscreen
        function toggleChart(chartName) {
            const chart = charts[chartName];
            if (chart) {
                const container = chart.canvas.parentElement.parentElement;
                container.classList.toggle('fullscreen');
                
                if (container.classList.contains('fullscreen')) {
                    container.style.position = 'fixed';
                    container.style.top = '0';
                    container.style.left = '0';
                    container.style.width = '100%';
                    container.style.height = '100%';
                    container.style.zIndex = '1000';
                    container.style.margin = '0';
                    container.style.borderRadius = '0';
                } else {
                    container.style.position = '';
                    container.style.top = '';
                    container.style.left = '';
                    container.style.width = '';
                    container.style.height = '';
                    container.style.zIndex = '';
                    container.style.margin = '';
                    container.style.borderRadius = '';
                }
                
                chart.resize();
            }
        }
        
        // Export Data
        function exportData() {
            const dataStr = JSON.stringify(dataBuffer, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `power-switch-data-${new Date().toISOString()}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showNotification('Data exported successfully!', 'success');
        }
        
        // Show Quick Actions
        function showQuickActions() {
            document.getElementById('quick-actions-modal').style.display = 'flex';
        }
        
        // Hide Modal
        function hideModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
        
        // Take Screenshot
        function takeScreenshot() {
            html2canvas(document.body).then(canvas => {
                const link = document.createElement('a');
                link.download = `dashboard-screenshot-${new Date().toISOString()}.png`;
                link.href = canvas.toDataURL();
                link.click();
                
                showNotification('Screenshot saved!', 'success');
            });
            
            hideModal('quick-actions-modal');
        }
        
        // Export Report
        function exportReport() {
            // Generate PDF report
            showNotification('Generating PDF report...', 'info');
            
            setTimeout(() => {
                showNotification('✅ Report generated successfully!', 'success');
                hideModal('quick-actions-modal');
            }, 2000);
        }
        
        // Show Help
        function showHelp() {
            showNotification('📖 Help documentation opened in new tab', 'info');
            window.open('https://docs.mh-alliwa.com/power-switch', '_blank');
            hideModal('quick-actions-modal');
        }
        
        // Clear Logs
        function clearLogs() {
            if (confirm('Clear all system logs?')) {
                const table = document.getElementById('log-table');
                table.innerHTML = '<tr><td colspan="4" class="text-center">No logs available</td></tr>';
                showNotification('Logs cleared', 'success');
            }
        }
        
        // Save Settings
        function saveSettings() {
            showNotification('Settings saved successfully!', 'success');
        }
        
        // Setup Event Listeners
        function setupEventListeners() {
            // Slider events
            document.getElementById('threshold-slider').addEventListener('input', function() {
                document.getElementById('threshold-value').textContent = this.value + 'V';
            });
            
            document.getElementById('current-slider').addEventListener('input', function() {
                document.getElementById('current-limit').textContent = this.value + 'A';
            });
            
            // Close modals on click outside
            document.addEventListener('click', function(event) {
                const modals = document.querySelectorAll('.modal');
                modals.forEach(modal => {
                    if (event.target === modal) {
                        modal.style.display = 'none';
                    }
                });
            });
            
            // Keyboard shortcuts
            document.addEventListener('keydown', function(event) {
                // Ctrl + S to save
                if (event.ctrlKey && event.key === 's') {
                    event.preventDefault();
                    saveSettings();
                }
                
                // F5 to refresh
                if (event.key === 'F5') {
                    event.preventDefault();
                    location.reload();
                }
                
                // Escape to close modals
                if (event.key === 'Escape') {
                    document.querySelectorAll('.modal').forEach(modal => {
                        modal.style.display = 'none';
                    });
                }
            });
        }
        
        // Start Background Animations
        function startBackgroundAnimations() {
            // Add more particles to background
            setInterval(() => {
                const particleCount = 5;
                for (let i = 0; i < particleCount; i++) {
                    setTimeout(() => {
                        const x = Math.random() * 100;
                        const y = Math.random() * 100;
                        const size = Math.random() * 100 + 50;
                        
                        const particle = document.createElement('div');
                        particle.style.cssText = `
                            position: fixed;
                            left: ${x}vw;
                            top: ${y}vh;
                            width: ${size}px;
                            height: ${size}px;
                            background: radial-gradient(circle, 
                                rgba(76, 201, 240, 0.1) 0%, 
                                rgba(76, 201, 240, 0.05) 30%, 
                                transparent 70%);
                            border-radius: 50%;
                            pointer-events: none;
                            z-index: -1;
                            animation: floatParticle ${Math.random() * 20 + 10}s linear infinite;
                        `;
                        
                        document.querySelector('.bg-animation').appendChild(particle);
                        
                        // Remove after animation
                        setTimeout(() => {
                            if (particle.parentNode) {
                                particle.parentNode.removeChild(particle);
                            }
                        }, 30000);
                    }, i * 2000);
                }
            }, 10000);
            
            // Add CSS for particle animation
            const style = document.createElement('style');
            style.textContent = `
                @keyframes floatParticle {
                    0% { 
                        transform: translate(0, 0) rotate(0deg); 
                        opacity: 0; 
                    }
                    10% { opacity: 0.3; }
                    90% { opacity: 0.3; }
                    100% { 
                        transform: translate(${Math.random() * 200 - 100}px, ${Math.random() * 200 - 100}px) rotate(360deg); 
                        opacity: 0; 
                    }
                }
            `;
            document.head.appendChild(style);
        }
        
        // Load Initial Data
        function loadInitialData() {
            window.startTime = Date.now();
            
            // Load logs
            loadLogs();
            
            // Set initial values
            document.getElementById('daily-energy').textContent = '12.5kWh';
            document.getElementById('monthly-energy').textContent = '356.8kWh';
            document.getElementById('cost-today').textContent = 'Rp 25.000';
            document.getElementById('reliability-score').textContent = '99.9%';
        }
        
        // Load Logs
        function loadLogs() {
            const logTable = document.getElementById('log-table');
            const sampleLogs = [
                {time: '10:30:15', level: 'INFO', source: 'System', message: 'System boot completed'},
                {time: '10:31:22', level: 'INFO', source: 'WiFi', message: 'Connected to network'},
                {time: '10:35:18', level: 'WARNING', source: 'Voltage', message: 'Source 1 voltage low (175V)'},
                {time: '10:40:05', level: 'INFO', source: 'Auto-Switch', message: 'Switched to Source 2'},
                {time: '10:45:33', level: 'INFO', source: 'Energy', message: 'Daily consumption: 12.5 kWh'},
                {time: '10:50:47', level: 'ERROR', source: 'Sensor', message: 'Current sensor reading timeout'},
                {time: '10:55:12', level: 'INFO', source: 'System', message: 'Auto-recovery completed'},
            ];
            
            logTable.innerHTML = '';
            sampleLogs.forEach(log => {
                const row = logTable.insertRow();
                
                // Level badge
                let levelClass = '';
                switch(log.level) {
                    case 'ERROR': levelClass = 'status-offline'; break;
                    case 'WARNING': levelClass = 'status-warning'; break;
                    case 'INFO': levelClass = 'status-online'; break;
                }
                
                row.innerHTML = `
                    <td>${log.time}</td>
                    <td><span class="status-badge ${levelClass}" style="padding: 5px 10px;">${log.level}</span></td>
                    <td>${log.source}</td>
                    <td>${log.message}</td>
                `;
            });
        }
        
        // Initialize on load
        document.addEventListener('DOMContentLoaded', initDashboard);
        
        // Add html2canvas library dynamically
        const script = document.createElement('script');
        script.src = 'https://html2canvas.hertzen.com/dist/html2canvas.min.js';
        document.head.appendChild(script);
    </script>
</body>
</html>
